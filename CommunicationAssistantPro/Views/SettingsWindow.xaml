<Window x:Class="CommunicationAssistantPro.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="الإعدادات - Communication Assistant Pro" 
        Height="700" Width="900"
        MinHeight="500" MinWidth="700"
        WindowStartupLocation="CenterOwner"
        FlowDirection="RightToLeft"
        Language="ar-IQ">
    
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesignTheme.Defaults.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    
    <!-- Background pattern -->
    <Grid>
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#F5F5F5" Offset="0"/>
                <GradientStop Color="#E0E0E0" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>
        
        <Grid Margin="30">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <!-- Settings Navigation -->
        <Border Grid.Column="0" 
                Background="#F5F5F5" 
                CornerRadius="10"
                Margin="0,0,30,0">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="20">
                    <TextBlock Text="الإعدادات" 
                              FontSize="20" 
                              FontWeight="Bold" 
                              Foreground="#1976D2" 
                              Margin="0,0,0,20"/>
                    
                    <Button x:Name="GeneralSettingsButton"
                           Content="عام"
                           Style="{StaticResource MaterialDesignRaisedButton}"
                           Height="50" 
                           Margin="0,0,0,10"
                           HorizontalAlignment="Stretch"
                           Click="GeneralSettingsButton_Click"/>
                    
                    <Button x:Name="PBXSettingsButton"
                           Content="إعدادات PBX"
                           Style="{StaticResource MaterialDesignOutlinedButton}"
                           Height="50" 
                           Margin="0,0,0,10"
                           HorizontalAlignment="Stretch"
                           Click="PBXSettingsButton_Click"/>
                    
                    <Button x:Name="CallFileSettingsButton"
                           Content="ملف حالة المكالمات"
                           Style="{StaticResource MaterialDesignOutlinedButton}"
                           Height="50" 
                           Margin="0,0,0,10"
                           HorizontalAlignment="Stretch"
                           Click="CallFileSettingsButton_Click"/>
                    
                    <Button x:Name="SecuritySettingsButton"
                           Content="الأمان"
                           Style="{StaticResource MaterialDesignOutlinedButton}"
                           Height="50" 
                           Margin="0,0,0,10"
                           HorizontalAlignment="Stretch"
                           Click="SecuritySettingsButton_Click"/>
                    
                    <Button x:Name="UserManagementButton"
                           Content="إدارة المستخدمين"
                           Style="{StaticResource MaterialDesignOutlinedButton}"
                           Height="50" 
                           Margin="0,0,0,10"
                           HorizontalAlignment="Stretch"
                           Click="UserManagementButton_Click"
                           Visibility="{Binding IsAdmin, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                    
                    <Separator Margin="0,20,0,20"/>
                    
                    <Button x:Name="TestConnectionButton"
                           Content="اختبار الاتصال"
                           Style="{StaticResource MaterialDesignRaisedButton}"
                           Height="50" 
                           Margin="0,0,0,10"
                           HorizontalAlignment="Stretch"
                           Background="#4CAF50"
                           Click="TestConnectionButton_Click"/>
                    
                    <Button x:Name="SaveButton"
                           Content="حفظ"
                           Style="{StaticResource MaterialDesignRaisedButton}"
                           Height="50" 
                           Margin="0,0,0,10"
                           HorizontalAlignment="Stretch"
                           Background="#1976D2"
                           Click="SaveButton_Click"/>
                    
                    <Button x:Name="CancelButton"
                           Content="إلغاء"
                           Style="{StaticResource MaterialDesignOutlinedButton}"
                           Height="50" 
                           Margin="0,0,0,10"
                           HorizontalAlignment="Stretch"
                           Click="CancelButton_Click"/>
                </StackPanel>
            </ScrollViewer>
        </Border>
        
        <!-- Settings Content -->
        <ScrollViewer Grid.Column="1" 
                    VerticalScrollBarVisibility="Auto">
            <StackPanel x:Name="SettingsContentPanel">
                
                <!-- General Settings -->
                <materialDesign:Card x:Name="GeneralSettingsPanel"
                                   Style="{StaticResource MaterialDesignCard}"
                                   Padding="30"
                                   Margin="0,0,0,20"
                                   Visibility="Visible">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0"
                                 Text="الإعدادات العامة"
                                 FontSize="20" 
                                 FontWeight="Bold" 
                                 Foreground="#1976D2" 
                                 Margin="0,0,0,30"/>
                        
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Language -->
                            <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,20,20">
                                <TextBlock Text="لغة الواجهة" FontWeight="Medium" Margin="0,0,0,5"/>
                                <ComboBox x:Name="LanguageComboBox"
                                        materialDesign:HintAssist.Hint="اختر اللغة"
                                        SelectedIndex="0">
                                    <ComboBoxItem Content="العربية"/>
                                    <ComboBoxItem Content="English"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <!-- RTL Support -->
                            <StackPanel Grid.Column="1" Grid.Row="0" Margin="0,0,20,20">
                                <TextBlock Text="دعم الاتجاه من اليمين لليسار" FontWeight="Medium" Margin="0,0,0,5"/>
                                <ToggleButton x:Name="RTLSupportToggle"
                                           Content="مفعل"
                                           IsChecked="True"
                                           Style="{StaticResource MaterialDesignSwitchToggleButton}"/>
                            </StackPanel>
                            
                            <!-- Notifications -->
                            <StackPanel Grid.Column="0" Grid.Row="1" Margin="0,0,20,20">
                                <TextBlock Text="الإشعارات" FontWeight="Medium" Margin="0,0,0,5"/>
                                <ToggleButton x:Name="NotificationsToggle"
                                           Content="مفعلة"
                                           IsChecked="True"
                                           Style="{StaticResource MaterialDesignSwitchToggleButton}"/>
                            </StackPanel>
                            
                            <!-- Sounds -->
                            <StackPanel Grid.Column="1" Grid.Row="1" Margin="0,0,20,20">
                                <TextBlock Text="الأصوات" FontWeight="Medium" Margin="0,0,0,5"/>
                                <ToggleButton x:Name="SoundsToggle"
                                           Content="مفعلة"
                                           IsChecked="True"
                                           Style="{StaticResource MaterialDesignSwitchToggleButton}"/>
                            </StackPanel>
                            
                            <!-- Auto Refresh Interval -->
                            <StackPanel Grid.Column="0" Grid.Row="2" Margin="0,0,20,20">
                                <TextBlock Text="فترة التحديث التلقائي (ثواني)" FontWeight="Medium" Margin="0,0,0,5"/>
                                <TextBox x:Name="AutoRefreshTextBox"
                                       materialDesign:HintAssist.Hint="5"
                                       Text="5"
                                       FontSize="14"/>
                            </StackPanel>
                            
                            <!-- Theme -->
                            <StackPanel Grid.Column="1" Grid.Row="2" Margin="0,0,20,20">
                                <TextBlock Text="المظهر" FontWeight="Medium" Margin="0,0,0,5"/>
                                <ComboBox x:Name="ThemeComboBox"
                                        materialDesign:HintAssist.Hint="اختر المظهر"
                                        SelectedIndex="0">
                                    <ComboBoxItem Content="فاتح"/>
                                    <ComboBoxItem Content="داكن"/>
                                </ComboBox>
                            </StackPanel>
                            
                            <!-- Session Timeout -->
                            <StackPanel Grid.Column="0" Grid.Row="3" Margin="0,0,20,20">
                                <TextBlock Text="مهلة الجلسة (دقيقة)" FontWeight="Medium" Margin="0,0,0,5"/>
                                <TextBox x:Name="SessionTimeoutTextBox"
                                       materialDesign:HintAssist.Hint="480"
                                       Text="480"
                                       FontSize="14"/>
                            </StackPanel>
                            
                            <!-- Auto Login -->
                            <StackPanel Grid.Column="1" Grid.Row="3" Margin="0,0,20,20">
                                <TextBlock Text="تسجيل الدخول التلقائي" FontWeight="Medium" Margin="0,0,0,5"/>
                                <ToggleButton x:Name="AutoLoginToggle"
                                           Content="معطل"
                                           IsChecked="False"
                                           Style="{StaticResource MaterialDesignSwitchToggleButton}"/>
                            </StackPanel>
                        </Grid>
                    </Grid>
                </materialDesign:Card>
                
                <!-- PBX Settings -->
                <materialDesign:Card x:Name="PBXSettingsPanel"
                                   Style="{StaticResource MaterialDesignCard}"
                                   Padding="30"
                                   Margin="0,0,0,20"
                                   Visibility="Collapsed">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0"
                                 Text="إعدادات PBX"
                                 FontSize="20" 
                                 FontWeight="Bold" 
                                 Foreground="#1976D2" 
                                 Margin="0,0,0,30"/>
                        
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Connection Method -->
                            <StackPanel Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="0" Margin="0,0,20,20">
                                <TextBlock Text="طريقة الاتصال" FontWeight="Medium" Margin="0,0,0,5"/>
                                <StackPanel Orientation="Horizontal">
                                    <RadioButton x:Name="AMIRadioButton"
                                               Content="AMI (Asterisk Manager Interface)"
                                               GroupName="ConnectionMethod"
                                               IsChecked="True"
                                               Margin="0,0,20,0"/>
                                    <RadioButton x:Name="HTTPRadioButton"
                                               Content="HTTP API"
                                               GroupName="ConnectionMethod"/>
                                </StackPanel>
                            </StackPanel>
                            
                            <!-- IP Address -->
                            <StackPanel Grid.Column="0" Grid.Row="1" Margin="0,0,20,20">
                                <TextBlock Text="عنوان IP" FontWeight="Medium" Margin="0,0,0,5"/>
                                <TextBox x:Name="PBXIpTextBox"
                                       materialDesign:HintAssist.Hint="192.168.1.100"
                                       Text="{Binding Settings.PBX_IP}"
                                       FontSize="14"/>
                            </StackPanel>
                            
                            <!-- Port -->
                            <StackPanel Grid.Column="1" Grid.Row="1" Margin="0,0,20,20">
                                <TextBlock Text="المنفذ" FontWeight="Medium" Margin="0,0,0,5"/>
                                <TextBox x:Name="PBXPortTextBox"
                                       materialDesign:HintAssist.Hint="5038"
                                       Text="{Binding Settings.PBX_Port}"
                                       FontSize="14"/>
                            </StackPanel>
                            
                            <!-- Username -->
                            <StackPanel Grid.Column="0" Grid.Row="2" Margin="0,0,20,20">
                                <TextBlock Text="اسم المستخدم" FontWeight="Medium" Margin="0,0,0,5"/>
                                <TextBox x:Name="PBXUsernameTextBox"
                                       materialDesign:HintAssist.Hint="admin"
                                       Text="{Binding Settings.PBX_Username}"
                                       FontSize="14"/>
                            </StackPanel>
                            
                            <!-- Password -->
                            <StackPanel Grid.Column="1" Grid.Row="2" Margin="0,0,20,20">
                                <TextBlock Text="كلمة المرور" FontWeight="Medium" Margin="0,0,0,5"/>
                                <PasswordBox x:Name="PBXPasswordBox"
                                           materialDesign:HintAssist.Hint="كلمة المرور"
                                           FontSize="14"/>
                            </StackPanel>
                            
                            <!-- Connection Status -->
                            <StackPanel Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="3" Margin="0,0,20,20">
                                <TextBlock Text="حالة الاتصال" FontWeight="Medium" Margin="0,0,0,10"/>
                                <Border Background="#F5F5F5" 
                                      BorderBrush="#E0E0E0" 
                                      BorderThickness="1" 
                                      CornerRadius="5" 
                                      Padding="15">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <materialDesign:PackIcon Grid.Column="0"
                                                              Kind="NetworkOutline"
                                                              Width="24" Height="24"
                                                              Foreground="#757575"
                                                              Margin="0,0,15,0"/>
                                        
                                        <TextBlock Grid.Column="1"
                                                 x:Name="PBXConnectionStatusTextBlock"
                                                 Text="غير متصل"
                                                 FontSize="14"
                                                 VerticalAlignment="Center"
                                                 Foreground="#757575"/>
                                    </Grid>
                                </Border>
                            </StackPanel>
                        </Grid>
                    </Grid>
                </materialDesign:Card>
                
                <!-- Call File Settings -->
                <materialDesign:Card x:Name="CallFileSettingsPanel"
                                   Style="{StaticResource MaterialDesignCard}"
                                   Padding="30"
                                   Margin="0,0,0,20"
                                   Visibility="Collapsed">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0"
                                 Text="إعدادات ملف حالة المكالمات"
                                 FontSize="20" 
                                 FontWeight="Bold" 
                                 Foreground="#1976D2" 
                                 Margin="0,0,0,30"/>
                        
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Enable Call Status File -->
                            <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,20,20">
                                <TextBlock Text="تفعيل ملف حالة المكالمات" FontWeight="Medium" Margin="0,0,0,5"/>
                                <ToggleButton x:Name="EnableCallFileToggle"
                                           Content="مفعل"
                                           IsChecked="True"
                                           Style="{StaticResource MaterialDesignSwitchToggleButton}"/>
                            </StackPanel>
                            
                            <!-- File Timeout -->
                            <StackPanel Grid.Column="1" Grid.Row="0" Margin="0,0,20,20">
                                <TextBlock Text="مهلة حذف الملف (ثوانٍ)" FontWeight="Medium" Margin="0,0,0,5"/>
                                <TextBox x:Name="CallFileTimeoutTextBox"
                                       materialDesign:HintAssist.Hint="3"
                                       Text="3"
                                       FontSize="14"/>
                            </StackPanel>
                            
                            <!-- File Path -->
                            <StackPanel Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1" Margin="0,0,20,20">
                                <TextBlock Text="مسار الملف" FontWeight="Medium" Margin="0,0,0,5"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <TextBox Grid.Column="0"
                                           x:Name="CallFilePathTextBox"
                                           materialDesign:HintAssist.Hint="C:\Temp\CaCallstatus.dat"
                                           Text="C:\Temp\CaCallstatus.dat"
                                           FontSize="14"
                                           Margin="0,0,10,0"/>
                                    
                                    <Button Grid.Column="1"
                                          Content="استعراض"
                                          Style="{StaticResource MaterialDesignOutlinedButton}"
                                          Height="40"
                                          Click="BrowseFilePathButton_Click"/>
                                </Grid>
                            </StackPanel>
                            
                            <!-- File Preview -->
                            <StackPanel Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="2" Margin="0,0,20,20">
                                <TextBlock Text="معاينة الملف" FontWeight="Medium" Margin="0,0,0,10"/>
                                <Border Background="#F5F5F5" 
                                      BorderBrush="#E0E0E0" 
                                      BorderThickness="1" 
                                      CornerRadius="5" 
                                      Padding="15"
                                      Height="100">
                                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                                        <TextBlock x:Name="FilePreviewTextBlock"
                                                 Text="معاينة محتوى الملف ستظهر هنا"
                                                 FontSize="12"
                                                 Foreground="#757575"
                                                 TextWrapping="Wrap"/>
                                    </ScrollViewer>
                                </Border>
                            </StackPanel>
                        </Grid>
                    </Grid>
                </materialDesign:Card>
                
                <!-- Security Settings -->
                <materialDesign:Card x:Name="SecuritySettingsPanel"
                                   Style="{StaticResource MaterialDesignCard}"
                                   Padding="30"
                                   Margin="0,0,0,20"
                                   Visibility="Collapsed">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        
                        <TextBlock Grid.Row="0"
                                 Text="إعدادات الأمان"
                                 FontSize="20" 
                                 FontWeight="Bold" 
                                 Foreground="#1976D2" 
                                 Margin="0,0,0,30"/>
                        
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Enable Encryption -->
                            <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,20,20">
                                <TextBlock Text="تفعيل التشفير" FontWeight="Medium" Margin="0,0,0,5"/>
                                <ToggleButton x:Name="EnableEncryptionToggle"
                                           Content="مفعل"
                                           IsChecked="True"
                                           Style="{StaticResource MaterialDesignSwitchToggleButton}"/>
                            </StackPanel>
                            
                            <!-- Max Login Attempts -->
                            <StackPanel Grid.Column="1" Grid.Row="0" Margin="0,0,20,20">
                                <TextBlock Text="عدد محاولات تسجيل الدخول المسموحة" FontWeight="Medium" Margin="0,0,0,5"/>
                                <TextBox x:Name="MaxLoginAttemptsTextBox"
                                       materialDesign:HintAssist.Hint="3"
                                       Text="3"
                                       FontSize="14"/>
                            </StackPanel>
                            
                            <!-- Lockout Duration -->
                            <StackPanel Grid.Column="0" Grid.Row="1" Margin="0,0,20,20">
                                <TextBlock Text="مدة الحظر (دقيقة)" FontWeight="Medium" Margin="0,0,0,5"/>
                                <TextBox x:Name="LockoutDurationTextBox"
                                       materialDesign:HintAssist.Hint="15"
                                       Text="15"
                                       FontSize="14"/>
                            </StackPanel>
                            
                            <!-- Require Password for Logout -->
                            <StackPanel Grid.Column="1" Grid.Row="1" Margin="0,0,20,20">
                                <TextBlock Text="طلب كلمة المرور عند تسجيل الخروج" FontWeight="Medium" Margin="0,0,0,5"/>
                                <ToggleButton x:Name="RequirePasswordLogoutToggle"
                                           Content="اختياري"
                                           IsChecked="False"
                                           Style="{StaticResource MaterialDesignSwitchToggleButton}"/>
                            </StackPanel>
                            
                            <!-- Log Retention -->
                            <StackPanel Grid.Column="0" Grid.Row="2" Margin="0,0,20,20">
                                <TextBlock Text="فترة الاحتفاظ بالسجلات (يوم)" FontWeight="Medium" Margin="0,0,0,5"/>
                                <TextBox x:Name="LogRetentionTextBox"
                                       materialDesign:HintAssist.Hint="30"
                                       Text="30"
                                       FontSize="14"/>
                            </StackPanel>
                            
                            <!-- Database Backup -->
                            <StackPanel Grid.Column="1" Grid.Row="2" Margin="0,0,20,20">
                                <TextBlock Text="فترة النسخ الاحتياطي (ساعة)" FontWeight="Medium" Margin="0,0,0,5"/>
                                <TextBox x:Name="BackupIntervalTextBox"
                                       materialDesign:HintAssist.Hint="24"
                                       Text="24"
                                       FontSize="14"/>
                            </StackPanel>
                        </Grid>
                    </Grid>
                </materialDesign:Card>
                
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Grid>
</Window>