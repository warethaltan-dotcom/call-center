# Communication Assistant Pro - نظام الاتصالات المتكامل

![Version](https://img.shields.io/badge/Version-1.0.0-blue.svg)
![Platform](https://img.shields.io/badge/Platform-Windows-lightgrey.svg)
![Framework](https://img.shields.io/badge/Framework-.NET%208-brightgreen.svg)
![License](https://img.shields.io/badge/License-Commercial-red.svg)

**منتج من:** Basra Delight Group  
**الموقع:** البصرة، العراق  
**المطور:** MiniMax Agent  
**التاريخ:** 2025-10-26

---

## 📋 نظرة عامة

Communication Assistant Pro هو نظام اتصالات مكتبي متكامل مخصص للربط المباشر مع منظومة PBX Grandstream UCM. يوفر النظام إدارة شاملة للمكالمات والمستخدمين مع لوحة تحكم إدارية لمتابعة الأداء والتقارير.

### 🎯 الميزات الرئيسية

- ✅ **تكامل كامل مع PBX Grandstream** عبر AMI و HTTP API
- ✅ **واجهة مستخدم عربية** مع دعم RTL كامل
- ✅ **نظام مصادقة آمن** مع تشفير كلمات المرور
- ✅ **إدارة شاملة للمكالمات** مع تتبع الإحصائيات
- ✅ **لوحة تحكم إدارية** مع تقارير تفصيلية
- ✅ **نظام إشعارات فوري** للمكالمات الواردة
- ✅ **إدارة المستخدمين** مع مستويات صلاحيات متعددة
- ✅ **قاعدة بيانات محلية** SQLite مع نسخ احتياطية تلقائية
- ✅ **نظام سجلات شامل** لتتبع جميع الأنشطة

---

## 🏗️ البنية التقنية

### التقنيات المستخدمة

| المكون | التقنيات |
|---------|-----------|
| **المنصة** | Windows 10/11, WPF |
| **الإطار البرمجي** | .NET 8.0 |
| **قاعدة البيانات** | SQLite مع Entity Framework Core |
| **واجهة المستخدم** | Material Design, LiveCharts |
| **الأمان** | BCrypt للتشفير |
| **التكامل مع PBX** | AMI (Asterisk Manager Interface), HTTP API |
| **إدارة التبعيات** | NuGet Packages |

### الهيكل التقني

```
CommunicationAssistantPro/
├── Models/                 # نماذج البيانات
│   ├── User.cs            # نماذج المستخدمين
│   ├── Call.cs            # نماذج المكالمات
│   └── Settings.cs        # نماذج الإعدادات
├── Services/              # خدمات التطبيق
│   ├── DatabaseService.cs # خدمة قاعدة البيانات
│   ├── PBXService.cs      # خدمة الاتصال بـ PBX
│   └── SettingsService.cs # خدمة الإعدادات
├── ViewModels/            # نماذج العرض
│   ├── LoginViewModel.cs  # نموذج تسجيل الدخول
│   └── MainWindowViewModel.cs # نموذج النافذة الرئيسية
├── Views/                 # واجهات المستخدم
│   ├── LoginWindow.xaml   # نافذة تسجيل الدخول
│   ├── MainWindow.xaml    # النافذة الرئيسية
│   └── SettingsWindow.xaml # نافذة الإعدادات
├── Utilities/             # الأدوات المساعدة
│   ├── ErrorLogService.cs # خدمة سجل الأخطاء
│   └── ApplicationUtilities.cs # أدوات عامة
└── Resources/             # الموارد
    └── Strings.resx       # النصوص المتعددة اللغات
```

---

## 🚀 التثبيت والإعداد

### متطلبات النظام

- **نظام التشغيل:** Windows 10 أو أحدث
- **الذاكرة:** 4GB RAM كحد أدنى (8GB مُوصى به)
- **مساحة القرص:** 500MB متاحة
- **صلاحيات:** حساب إداري (لوصول ملفات النظام)

### خطوات التثبيت

1. **تحميل الملفات:**
   ```bash
   # قم بتحميل مشروع CommunicationAssistantPro كاملاً
   ```

2. **تثبيت التبعيات:**
   ```bash
   cd CommunicationAssistantPro
   dotnet restore
   ```

3. **بناء المشروع:**
   ```bash
   dotnet build --configuration Release
   ```

4. **تشغيل التطبيق:**
   ```bash
   dotnet run
   ```

### إعداد PBX Grandstream

#### الطريقة الأولى: AMI (Asterisk Manager Interface)

1. افتح واجهة إدارة Grandstream UCM
2. انتقل إلى **Settings > AMI Settings**
3. فعّل AMI وضع البيانات التالية:
   - **Port:** 5038 (افتراضي)
   - **Username:** admin
   - **Password:** [كلمة المرور المختارة]

#### الطريقة الثانية: HTTP API

1. فعّل HTTP API في إعدادات PBX
2. اضبط المنفذ المناسب (مثل 8080)
3. تأكد من تفعيل الصلاحيات المطلوبة

---

## 🔧 التكوين والإعدادات

### الإعدادات الأساسية

عند تشغيل التطبيق لأول مرة، سيتم عرض نافذة الإعدادات. قم بتكوين:

#### 1. إعدادات PBX
- **عنوان IP:** عنوان IP لخادم PBX
- **المنفذ:** منفذ الاتصال (5038 للـ AMI)
- **اسم المستخدم:** حساب المستخدم
- **كلمة المرور:** كلمة المرور
- **طريقة الاتصال:** AMI أو HTTP API

#### 2. ملف حالة المكالمات
- **تفعيل الملف:** نعم/لا
- **مسار الملف:** `C:\Temp\CaCallstatus.dat`
- **مهلة الحذف:** 3 ثوانٍ (افتراضي)

#### 3. إعدادات الأمان
- **تفعيل التشفير:** نعم
- **محاولات تسجيل الدخول:** 3 (افتراضي)
- **مهلة الجلسة:** 480 دقيقة (8 ساعات)

### إعدادات متقدمة

#### إعدادات قاعدة البيانات
- **مسار قاعدة البيانات:** `/LocalAppData/CommunicationAssistantPro/Database/`
- **فترة النسخ الاحتياطي:** 24 ساعة
- **فترة الاحتفاظ:** 30 يوم

#### إعدادات الواجهة
- **اللغة:** العربية (افتراضي)
- **دعم RTL:** مُفعل
- **المظهر:** فاتح/داكن
- **التحديث التلقائي:** 5 ثوانٍ

---

## 👥 إدارة المستخدمين

### أدوار المستخدمين

| الدور | الصلاحيات |
|--------|-----------|
| **موظف** | عرض المكالمات الشخصية، تسجيل الدخول/الخروج |
| **مشرف** | إدارة المستخدمين، عرض التقارير |
| **مدير** | إعدادات النظام، تقارير شاملة |
| **مدير عام** | جميع الصلاحيات، إدارة النظام بالكامل |

### إضافة مستخدم جديد

1. انتقل إلى **إدارة المستخدمين**
2. انقر على **إضافة مستخدم جديد**
3. أدخل البيانات:
   - الاسم الكامل
   - اسم المستخدم
   - كلمة المرور
   - رقم الامتداد
   - القسم
   - الدور

### إدارة كلمات المرور

- كلمات المرور مشفرة باستخدام BCrypt
- لا يمكن استعادة كلمات المرور المفقودة
- النظام يطلب كلمة مرور جديدة عند النسيان

---

## 📊 التقارير والإحصائيات

### لوحة التحكم الرئيسية

تعرض اللوحة الإحصائيات التالية:

- **إجمالي المكالمات اليوم**
- **المكالمات الواردة**
- **المكالمات الصادرة**
- **المستخدمون المتصلون**

### أنواع التقارير

#### 1. تقرير يومي
- عدد المكالمات
- مدة المكالمات
- معدل الرد
- قائمة المستخدمين النشطين

#### 2. تقرير أسبوعي
- اتجاه المكالمات
- المقارنة بين الأيام
- إحصائيات الأداء

#### 3. تقرير شهري
- تحليل شامل
- الاتجاهات الشهرية
- مقارنات الأداء

#### 4. تقرير المستخدمين
- النشاط الفردي
- أوقات الذروة
- معدلات الأداء

### تصدير التقارير

- **تنسيق Excel:** للتفاصيل والتحليل
- **تنسيق PDF:** للعرض والطباعة
- **تنسيق CSV:** للبيانات الخام

---

## 🔒 الأمان وحماية البيانات

### التشفير
- كلمات المرور مشفرة باستخدام BCrypt
- البيانات الحساسة محمية
- اتصالات PBX مشفرة (عند الدعم)

### إدارة الجلسات
- انتهاء صلاحية الجلسة تلقائياً
- تتبع أنشطة المستخدمين
- تسجيل الدخول والخروج

### النسخ الاحتياطية
- نسخ احتياطية تلقائية لقاعدة البيانات
- ضغط وحماية الملفات
- استعادة سريعة عند الحاجة

---

## 🛠️ استكشاف الأخطاء

### مشاكل شائعة وحلولها

#### 1. فشل الاتصال بـ PBX

**الأعراض:**
- رسالة "غير متصل" في شريط الحالة
- عدم تحديث حالة المكالمات

**الحلول:**
1. تأكد من صحة عنوان IP
2. تحقق من تشغيل خدمة AMI
3. اختبر الاتصال باستخدام "اختبار الاتصال"
4. تحقق من إعدادات جدار الحماية

#### 2. مشكلة في تسجيل الدخول

**الأعراض:**
- "اسم المستخدم أو كلمة المرور غير صحيحة"

**الحلول:**
1. تأكد من صحة البيانات
2. تحقق من تفعيل الحساب
3. تأكد من عدم انتهاء صلاحية الجلسة

#### 3. مشاكل في ملف حالة المكالمات

**الأعراض:**
- الملف لا يتم إنشاؤه أو حذفه

**الحلول:**
1. تحقق من صلاحيات الوصول للمسار
2. تأكد من تفعيل إنشاء الملف
3. فحص المسار في الإعدادات

### ملفات السجل

يتم حفظ السجلات في:
```
/LocalAppData/CommunicationAssistantPro/Logs/
├── error_log_YYYYMMDD.txt
└── application.log
```

### أدوات التشخيص

- **تسجيل مفصل:** فعّل في الإعدادات
- **مراقبة الأداء:** استخدم Task Manager
- **فحص قاعدة البيانات:** استخدم SQLite Browser

---

## 📁 هيكل المجلدات والملفات

### ملفات التطبيق

```
CommunicationAssistantPro/
├── CommunicationAssistantPro.exe
├── CommunicationAssistantPro.dll
├── appsettings.json
└── icon.ico
```

### مجلدات البيانات

```
/LocalAppData/CommunicationAssistantPro/
├── Database/
│   ├── CommunicationAssistant.db
│   └── Backups/
├── Logs/
│   ├── error_log_2025*.txt
│   └── application.log
├── Config/
│   └── appsettings.json
├── Data/
└── Temp/
```

### ملفات النظام

```
C:\Temp\
└── CaCallstatus.dat (اختياري)
```

---

## 🔄 التحديثات والصيانة

### النسخ الاحتياطية

**التلقائية:**
- كل 24 ساعة
- ملف واحد فقط (الأحدث)

**اليدوية:**
- من قائمة الإعدادات
- قبل التحديثات المهمة

### التحديثات

**فحص التحديثات:**
- إعدادات > حول التطبيق

**تثبيت التحديثات:**
1. تحميل الملف الجديد
2. إغلاق التطبيق
3. استبدال الملفات
4. إعادة تشغيل

### الصيانة الدورية

**أسبوعياً:**
- تنظيف ملفات السجل القديمة
- فحص مساحة القرص

**شهرياً:**
- مراجعة إحصائيات الأداء
- تحديث كلمات المرور

---

## 🆘 الدعم والمساعدة

### الوثائق التقنية

- **دليل المطور:** `/Documentation/Developer-Guide.md`
- **API المرجعي:** `/Documentation/API-Reference.md`
- **أمثلة التكامل:** `/Documentation/Integration-Examples.md`

### الدعم الفني

**من خلال النظام:**
- زر "الدعم" في النافذة الرئيسية
- سجل الأخطاء
- معلومات النظام

**الاتصال المباشر:**
- **البريد الإلكتروني:** support@basradelight.com
- **الهاتف:** [رقم الدعم]
- **العنوان:** البصرة، العراق

### التدريب

- **التدريب الأساسي:** للمستخدمين الجدد
- **التدريب المتقدم:** للمشرفين
- **التدريب التقني:** لفريق تقنية المعلومات

---

## 📜 الترخيص والشروط

### نوع الترخيص
**ترخيص تجاري محدود**

### حقوق الاستخدام
- ✅ استخدام في بيئة Basra Delight Group
- ✅ نسخ للمؤسسات التابعة
- ❌ إعادة التوزيع أو البيع
- ❌ تعديل الكود المصدري

### الشروط والأحكام

1. **الاستخدام المصرح به:**
   - لاستخدام داخلي فقط
   - في المواقع المصرح بها
   - للهدف المحدد في العقد

2. **حماية البيانات:**
   - عدم مشاركة البيانات الحساسة
   - الالتزام بقوانين حماية البيانات
   - استخدام آمن لكلمات المرور

3. **الدعم الفني:**
   - متوفر خلال ساعات العمل
   - يشمل استكشاف الأخطاء
   - لا يشمل التخصيص أو التطوير

---

## 📈 إحصائيات المشروع

- **الملفات:** 25+ ملف أساسي
- **الأسطر:** 3,500+ سطر كود
- **الفئات:** 15+ فئة
- **الوظائف:** 50+ وظيفة
- **الاختبارات:** جاهز للاختبار
- **الوثائق:** شاملة ومفصلة

---

## 🔮 التطوير المستقبلي

### الميزات المخططة

**الإصدار 1.1:**
- 📞 تسجيل المكالمات
- 📊 تقارير متقدمة
- 🔔 إشعارات سطح المكتب

**الإصدار 1.2:**
- 📱 تطبيق الهاتف المحمول
- 🌐 واجهة ويب
- 🤖 تكامل مع AI

**الإصدار 2.0:**
- 🏢 إدارة متعددة المواقع
- 🔗 تكامل مع أنظمة CRM
- 📈 تحليلات متقدمة

### التحسينات المخططة

- تحسين الأداء
- دعم لغات إضافية
- تحسين الأمان
- تطوير واجهة المستخدم

---

## 📞 معلومات الاتصال

**المطور:** MiniMax Agent  
**الشركة:** Basra Delight Group  
**الموقع:** البصرة، العراق  
**البريد الإلكتروني:** info@basradelight.com  
**الهاتف:** [رقم الهاتف]  

---

*آخر تحديث: 2025-10-26*

**© 2025 Basra Delight Group - جميع الحقوق محفوظة**